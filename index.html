<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>今天的风儿甚是喧嚣 JiaoPan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="今天的风儿甚是喧嚣 JiaoPan">
<meta property="og:url" content="https://jiaopaner.github.io/index.html">
<meta property="og:site_name" content="今天的风儿甚是喧嚣 JiaoPan">
<meta property="article:author" content="JiaoPan">
<meta property="article:tag" content="deep learning|computer vision">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="今天的风儿甚是喧嚣 JiaoPan" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">今天的风儿甚是喧嚣 JiaoPan</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://jiaopaner.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-elasticsearch 教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/18/elasticsearch%20%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2019-12-18T02:28:11.000Z" itemprop="datePublished">2019-12-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/18/elasticsearch%20%E6%95%99%E7%A8%8B/">elasticsearch 教程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="elasticsearch-教程"><a href="#elasticsearch-教程" class="headerlink" title="elasticsearch 教程"></a>elasticsearch 教程</h1><p><img src="/images/elasticsearch/1.jpg" alt=""></p>
<h2 id="安装、启动、测试"><a href="#安装、启动、测试" class="headerlink" title="安装、启动、测试"></a>安装、启动、测试</h2><p>elasticsearch下载地址:<a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener">https://www.elastic.co/cn/downloads/elasticsearch</a><br>kibana下载地址:<a href="https://www.elastic.co/cn/downloads/kibana" target="_blank" rel="noopener">https://www.elastic.co/cn/downloads/kibana</a><br><strong>启动</strong><br>1.elasticsearch<br>./elasticsearch-7.5.1/bin/elasticsearch 默认端口：9200<br>浏览器访问：localhost:9200</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"jiaopandeMacBook-Pro.local"</span>,</span><br><span class="line">  <span class="string">"cluster_name"</span> : <span class="string">"elasticsearch"</span>,</span><br><span class="line">  <span class="string">"cluster_uuid"</span> : <span class="string">"5vku_94_SjevMGVYIo3RYg"</span>,</span><br><span class="line">  <span class="string">"version"</span> : &#123;</span><br><span class="line">    <span class="string">"number"</span> : <span class="string">"7.5.1"</span>,</span><br><span class="line">    <span class="string">"build_flavor"</span> : <span class="string">"default"</span>,</span><br><span class="line">    <span class="string">"build_type"</span> : <span class="string">"tar"</span>,</span><br><span class="line">    <span class="string">"build_hash"</span> : <span class="string">"3ae9ac9a93c95bd0cdc054951cf95d88e1e18d96"</span>,</span><br><span class="line">    <span class="string">"build_date"</span> : <span class="string">"2019-12-16T22:57:37.835892Z"</span>,</span><br><span class="line">    <span class="string">"build_snapshot"</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"lucene_version"</span> : <span class="string">"8.3.0"</span>,</span><br><span class="line">    <span class="string">"minimum_wire_compatibility_version"</span> : <span class="string">"6.8.0"</span>,</span><br><span class="line">    <span class="string">"minimum_index_compatibility_version"</span> : <span class="string">"6.0.0-beta1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.kibana<br>配置kibana-7.5.1-darwin-x86_64/config/kibana.yml</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server.host: <span class="string">"localhost"</span></span><br><span class="line">elasticsearch.hosts: [<span class="string">"http://localhost:9200"</span>]</span><br></pre></td></tr></table></figure>
<p>./kibana-7.5.1-darwin-x86_64/bin/kibana<br>浏览器访问：localhost:5601<br><img src="/images/elasticsearch/2.jpg" alt=""></p>
<p><strong>测试</strong><br>kibana Dev Tools<br><img src="/images/elasticsearch/3.jpg" alt=""></p>
<h3 id="index"><a href="#index" class="headerlink" title="index"></a>index</h3><p>创建索引:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUT http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index</span><br></pre></td></tr></table></figure>
<p>删除索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index</span><br></pre></td></tr></table></figure>
<h3 id="document"><a href="#document" class="headerlink" title="document"></a>document</h3><p>创建文档：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PUT http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;1</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;:&quot;jiaopan&quot;,</span><br><span class="line">&quot;age&quot;:25</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查询文档：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;1</span><br></pre></td></tr></table></figure>
<p>更新文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;1&#x2F;_update</span><br><span class="line">&#123;</span><br><span class="line">    &quot;doc&quot;:&#123;</span><br><span class="line">        &quot;name&quot;:&quot;jp&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>删除文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;1</span><br></pre></td></tr></table></figure>
<h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><p>1.query string search</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search?q&#x3D;name:jp&amp;sort&#x3D;age:desc</span><br></pre></td></tr></table></figure>
<p>2.query DSL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#查询所有</span><br><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;match_all&quot;:&#123;&#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">#条件查询</span><br><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;match_all&quot;:&#123;“name”:&quot;jp&quot;&#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;sort&quot;:[</span><br><span class="line">        &#123;&quot;age&quot;:&quot;desc&quot;&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#分页查询</span><br><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;match_all&quot;:&#123;&#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;from&quot;:1,</span><br><span class="line">    &quot;size&quot;:2</span><br><span class="line">&#125;</span><br><span class="line">#指定结果的字段</span><br><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;match_all&quot;:&#123;&#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;_source“：[&quot;name&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.query filter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;bool&quot;:&#123;</span><br><span class="line">            &quot;must&quot;:&#123;</span><br><span class="line">                &quot;name&quot;:&quot;jp&quot; #name必须包含jp</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;filter&quot;:&#123;</span><br><span class="line">                &quot;range&quot;:&#123;</span><br><span class="line">                    &quot;age&quot;:&#123;&quot;gt&quot;:18&#125; #年龄大于18</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.full-text search(全文检索)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;match&quot;:&#123;</span><br><span class="line">            &quot;name&quot;:&quot;jp jiaopan&quot; #匹配jp&#x2F;jiapan&#x2F;jp jiaopan</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5.phrase search(短语搜索)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;match_phrase&quot;:&#123;</span><br><span class="line">            &quot;name&quot;:&quot;jp jiaopan&quot; #只匹配jp jiaopan</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>6.highlight search(高亮搜索结果)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;127.0.0.1:9200&#x2F;test_index&#x2F;item&#x2F;_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot;:&#123;</span><br><span class="line">        &quot;match&quot;:&#123;</span><br><span class="line">            &quot;name&quot;:&quot;jp&quot; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;，</span><br><span class="line">    “highlight“：&#123;</span><br><span class="line">        &quot;fields&quot;:&#123;</span><br><span class="line">            &quot;name&quot;:&#123;&#125; #高亮的字段</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/12/18/elasticsearch%20%E6%95%99%E7%A8%8B/" data-id="ck4mhjkcc000nw6zw0elw3ob0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hadoop spark" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/20/hadoop%20spark/" class="article-date">
  <time datetime="2019-11-20T13:14:18.000Z" itemprop="datePublished">2019-11-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/20/hadoop%20spark/">hadoop spark</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.hadoop</p>
<p><img src="/images/bigdata/1.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/11/20/hadoop%20spark/" data-id="ck4mhjkcd000qw6zw7q895fch" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/" rel="tag">hadoop</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android使用opencv native方式环境搭建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/01/android%E4%BD%BF%E7%94%A8opencv%20native%E6%96%B9%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="article-date">
  <time datetime="2019-11-01T06:05:23.000Z" itemprop="datePublished">2019-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/01/android%E4%BD%BF%E7%94%A8opencv%20native%E6%96%B9%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">android使用opencv native方式环境搭建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.opencv下载：<a href="https://opencv.org/releases/" target="_blank" rel="noopener">https://opencv.org/releases/</a> 解压后为OpenCV-android-sdk</p>
<p><img src="/images/opencv3/41.png" alt=""></p>
<p>2.创建初始Android项目</p>
<p><img src="/images/opencv3/42.png" alt=""></p>
<p>3.在app/src/main目录下新建jniLibs目录，在app/src/main/cpp目录下新建include目录和src目录</p>
<p>将OpenCV-android-sdk/sdk/native/libs下所有目录复制到jniLibs目录中</p>
<p>将OpenCV-android-sdk/sdk/native/jni/include下的所有目录复制到app/src/main/cpp/include目录中</p>
<p>移动app/src/main/cpp/CMakeLists.txt至app目录下 </p>
<p>移动app/src/main/cpp/native-lib.cpp至app/src/main/cpp/src/native-lib.cpp</p>
<p><img src="/images/opencv3/43.png" alt=""></p>
<p>4.配置文件修改</p>
<p><strong>CMakeLists.txt</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># For more information about using CMake with Android Studio, read the</span><br><span class="line"># documentation: https:&#x2F;&#x2F;d.android.com&#x2F;studio&#x2F;projects&#x2F;add-native-code.html</span><br><span class="line"></span><br><span class="line"># Sets the minimum version of CMake required to build the native library.</span><br><span class="line"></span><br><span class="line">cmake_minimum_required(VERSION 3.4.1)</span><br><span class="line"></span><br><span class="line">include_directories($&#123;CMAKE_SOURCE_DIR&#125;&#x2F;src&#x2F;main&#x2F;cpp&#x2F;include)</span><br><span class="line"></span><br><span class="line">#opencv 4.0.1</span><br><span class="line">add_library(libopencv_java4 SHARED IMPORTED)</span><br><span class="line">set_target_properties(libopencv_java4 PROPERTIES IMPORTED_LOCATION</span><br><span class="line">        $&#123;CMAKE_SOURCE_DIR&#125;&#x2F;src&#x2F;main&#x2F;jniLibs&#x2F;$&#123;ANDROID_ABI&#125;&#x2F;libopencv_java4.so)</span><br><span class="line"></span><br><span class="line">#local</span><br><span class="line">add_library(native-lib SHARED src&#x2F;main&#x2F;cpp&#x2F;src&#x2F;native-lib.cpp)</span><br><span class="line">find_library(log-lib log )</span><br><span class="line"></span><br><span class="line">target_link_libraries(native-lib libopencv_java4 $&#123;log-lib&#125; )</span><br></pre></td></tr></table></figure>

<p><strong>app/build.gradle</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion 29</span><br><span class="line">    buildToolsVersion <span class="string">"29.0.2"</span></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId <span class="string">"com.wisesoft.wiseface"</span></span><br><span class="line">        minSdkVersion 21</span><br><span class="line">        targetSdkVersion 29</span><br><span class="line">        versionCode 1</span><br><span class="line">        versionName <span class="string">"1.0"</span></span><br><span class="line">        testInstrumentationRunner <span class="string">"androidx.test.runner.AndroidJUnitRunner"</span></span><br><span class="line">        externalNativeBuild &#123;</span><br><span class="line">            cmake &#123;</span><br><span class="line">                cppFlags <span class="string">"-std=c++11 -frtti -fexceptions"</span></span><br><span class="line">                abiFilters <span class="string">'armeabi-v7a'</span></span><br><span class="line">                arguments <span class="string">"-DANDROID_STL=c++_shared"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ndk&#123;</span><br><span class="line">            abiFilters <span class="string">'armeabi-v7a'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sourceSets&#123;</span><br><span class="line">        main&#123;</span><br><span class="line">            jniLibs.srcDirs = [<span class="string">'src/main/jniLibs'</span>]</span><br><span class="line">            jni.srcDirs = []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="literal">false</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android-optimize.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line">            ndk&#123;</span><br><span class="line">                abiFilters <span class="string">'armeabi-v7a'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    externalNativeBuild &#123;</span><br><span class="line">        cmake &#123;</span><br><span class="line">            path <span class="string">"CMakeLists.txt"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation fileTree(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span><br><span class="line">    implementation <span class="string">'androidx.appcompat:appcompat:1.1.0'</span></span><br><span class="line">    implementation <span class="string">'androidx.constraintlayout:constraintlayout:1.1.3'</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    androidTestImplementation <span class="string">'androidx.test:runner:1.2.0'</span></span><br><span class="line">    androidTestImplementation <span class="string">'androidx.test.espresso:espresso-core:3.2.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.刷新配置点击Sync Now并refresh c++</p>
<p><img src="/images/opencv3/44.png" alt=""></p>
<p>6.使用原生opencv c++ 代码进行开发</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;jni.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span> JNIEXPORT jstring JNICALL</span><br><span class="line">Java_com_wisesoft_wiseface_MainActivity_stringFromJNI(</span><br><span class="line">        JNIEnv* env,</span><br><span class="line">        jobject <span class="comment">/* this */</span>) &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> hello = <span class="string">"Hello from C++"</span>;</span><br><span class="line"></span><br><span class="line">    cv::Mat mat;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> env-&gt;NewStringUTF(hello.c_str());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/11/01/android%E4%BD%BF%E7%94%A8opencv%20native%E6%96%B9%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" data-id="ck4mhjkcf000vw6zw4rv3eesb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opencv/" rel="tag">opencv</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-深度学习模型转换" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/" class="article-date">
  <time datetime="2019-10-25T13:14:18.000Z" itemprop="datePublished">2019-10-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/">深度学习模型转换</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="mxnet模型转tensorflow模型"><a href="#mxnet模型转tensorflow模型" class="headerlink" title="mxnet模型转tensorflow模型"></a>mxnet模型转tensorflow模型</h3><p>requirements：pip install mxnet tensorflow</p>
<h5 id="1-安装mmdnn"><a href="#1-安装mmdnn" class="headerlink" title="1.安装mmdnn"></a>1.安装mmdnn</h5><p>pip install -U git+<a href="https://github.com/Microsoft/MMdnn.git@master" target="_blank" rel="noopener">https://github.com/Microsoft/MMdnn.git@master</a></p>
<h5 id="2-模型下载"><a href="#2-模型下载" class="headerlink" title="2.模型下载"></a>2.模型下载</h5><p><a href="https://pan.baidu.com/s/1If28BkHde4fiuweJrbicVA" target="_blank" rel="noopener">https://pan.baidu.com/s/1If28BkHde4fiuweJrbicVA</a></p>
<h5 id="3-mxnet模型转IR"><a href="#3-mxnet模型转IR" class="headerlink" title="3.mxnet模型转IR"></a>3.mxnet模型转IR</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python -m mmdnn.conversion._script.convertToIR -f mxnet -n model-symbol.json -w model-0000.params -d tf_model --inputShape 3,112,112 </span><br><span class="line"><span class="comment">#info:</span></span><br><span class="line">IR network structure is saved as [tf_model.json].<span class="comment">#可视化文件</span></span><br><span class="line">IR network structure is saved as [tf_model.pb].<span class="comment">#网络结构</span></span><br><span class="line">IR weights are saved as [tf_model.npy].<span class="comment">#权重参数</span></span><br></pre></td></tr></table></figure>

<p>若报错：AttributeError: ‘NoneType’ object has no attribute ‘asnumpy’ line 410</p>
<p>解决：找到python3.6/site-packages/mmdnn/conversion/mxnet/mxnet_parser.py 410 行 修改如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weight &#x3D; self.weight_data.get(&quot;fc1_weight&quot;).asnumpy().transpose((1, 0))</span><br></pre></td></tr></table></figure>

<p>参考：<a href="https://github.com/microsoft/MMdnn/issues/231" target="_blank" rel="noopener">https://github.com/microsoft/MMdnn/issues/231</a></p>
<h5 id="4-生成tf-model-py-用于还原神经网络结构"><a href="#4-生成tf-model-py-用于还原神经网络结构" class="headerlink" title="4.生成tf_model.py 用于还原神经网络结构"></a>4.生成tf_model.py 用于还原神经网络结构</h5><p>调用tf_model.py中的KitModel函数加载npy权重参数可重新生成原网络框架</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python -m mmdnn.conversion._script.IRToCode -f tensorflow --IRModelPath tf_model.pb --IRWeightPath tf_model.npy --dstModelPath tf_model.py</span><br><span class="line"><span class="comment">#info:</span></span><br><span class="line">Parse file [tf_model.pb] with binary format successfully.</span><br><span class="line">Target network code snippet is saved as [tf_model.py].</span><br></pre></td></tr></table></figure>

<h5 id="5-验证模型输出结果是否一致"><a href="#5-验证模型输出结果是否一致" class="headerlink" title="5.验证模型输出结果是否一致"></a>5.验证模型输出结果是否一致</h5><p>5.1 test_mxnet.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mxnet <span class="keyword">as</span> mx</span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib.keras.api.keras.preprocessing <span class="keyword">import</span> image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">Batch = namedtuple(<span class="string">'Batch'</span>, [<span class="string">'data'</span>])</span><br><span class="line"></span><br><span class="line">ctx = mx.cpu(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#加载模型</span></span><br><span class="line">sym, arg_params, aux_params = mx.model.load_checkpoint(<span class="string">'mobile/model'</span>, <span class="number">0</span>) <span class="comment">#mobile文件夹下为 model-symbol.json -w model-0000.params</span></span><br><span class="line">mod = mx.mod.Module(symbol = sym, context= ctx, label_names= <span class="literal">None</span>)</span><br><span class="line">mod.bind(for_training=<span class="literal">False</span>, data_shapes=[(<span class="string">'data'</span>, (<span class="number">1</span>, <span class="number">3</span>, <span class="number">112</span>, <span class="number">112</span>))], label_shapes= mod._label_shapes)</span><br><span class="line">mod.set_params(arg_params, aux_params, allow_missing= <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">path = <span class="string">'face.jpeg'</span></span><br><span class="line">img = image.load_img(path, target_size = (<span class="number">112</span>, <span class="number">112</span>))</span><br><span class="line">img = image.img_to_array(img)</span><br><span class="line">img = img[..., ::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">img = np.expand_dims(img, <span class="number">0</span>).transpose((<span class="number">0</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">mod.forward(Batch([mx.nd.array(img)]))</span><br><span class="line">prob = mod.get_outputs()[<span class="number">0</span>].asnumpy()</span><br><span class="line">prob = np.squeeze(prob)</span><br><span class="line">print(prob)</span><br></pre></td></tr></table></figure>

<p><strong><em>执行命令</em></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">python test_mxnet.py </span><br><span class="line"><span class="comment">#info:</span></span><br><span class="line">[<span class="number">17</span>:<span class="number">39</span>:<span class="number">57</span>] src/nnvm/legacy_json_util.cc:<span class="number">209</span>: Loading symbol saved by previous version v1<span class="number">.0</span><span class="number">.0</span>. Attempting to upgrade...</span><br><span class="line">[<span class="number">17</span>:<span class="number">39</span>:<span class="number">57</span>] src/nnvm/legacy_json_util.cc:<span class="number">217</span>: Symbol successfully upgraded!</span><br><span class="line">[ <span class="number">0.344491</span>    <span class="number">0.10190611</span> <span class="number">-0.24501216</span>  <span class="number">0.6819046</span>   <span class="number">0.88096315</span>  <span class="number">0.347766</span></span><br><span class="line"> <span class="number">-0.94702303</span> <span class="number">-0.67586213</span> <span class="number">-0.43900824</span>  <span class="number">0.81431276</span> <span class="number">-0.4899036</span>  <span class="number">-0.43025514</span></span><br><span class="line"> <span class="number">-0.50644076</span> <span class="number">-0.27366892</span>  <span class="number">0.63601595</span> <span class="number">-0.5352368</span>   <span class="number">0.13765731</span>  <span class="number">0.40842316</span></span><br><span class="line">  <span class="number">0.76525426</span> <span class="number">-0.8959755</span>   <span class="number">0.42129532</span> <span class="number">-0.38290668</span>  <span class="number">0.02023177</span> <span class="number">-0.14840017</span></span><br><span class="line">  <span class="number">0.9108279</span>  <span class="number">-0.27738237</span> <span class="number">-0.6017331</span>  <span class="number">-0.214954</span>    <span class="number">0.37644073</span>  <span class="number">0.48894417</span></span><br><span class="line"> <span class="number">-0.8824417</span>   <span class="number">0.31846505</span>  <span class="number">0.19936565</span>  <span class="number">0.27296835</span>  <span class="number">1.5621403</span>   <span class="number">0.4327985</span></span><br><span class="line"> <span class="number">-0.6486908</span>  <span class="number">-0.23494942</span> <span class="number">-0.8708738</span>  <span class="number">-0.77051663</span>  <span class="number">0.09255238</span> <span class="number">-1.1803752</span></span><br><span class="line"> <span class="number">-0.17184262</span>  <span class="number">0.2543226</span>  <span class="number">-0.19088541</span> <span class="number">-0.26873437</span>  <span class="number">0.9160875</span>  <span class="number">-0.18985008</span></span><br><span class="line"> <span class="number">-0.4793183</span>  <span class="number">-0.32987356</span> <span class="number">-1.3085973</span>   <span class="number">1.2959319</span>  <span class="number">-0.00581244</span>  <span class="number">0.12396478</span></span><br><span class="line">  <span class="number">1.2034996</span>   <span class="number">0.0991946</span>  <span class="number">-1.9225345</span>   <span class="number">0.92873436</span> <span class="number">-0.285992</span>    <span class="number">0.11249313</span></span><br><span class="line"> <span class="number">-1.4562801</span>   <span class="number">1.8767762</span>  <span class="number">-1.2222489</span>  <span class="number">-0.03905598</span>  <span class="number">0.5152731</span>   <span class="number">0.04876914</span></span><br><span class="line">  <span class="number">0.04671988</span> <span class="number">-0.32384786</span> <span class="number">-0.88341314</span>  <span class="number">0.58193505</span> <span class="number">-0.7378911</span>  <span class="number">-0.3082042</span></span><br><span class="line">  <span class="number">0.22141728</span>  <span class="number">0.7255646</span>   <span class="number">0.24394599</span>  <span class="number">0.6563271</span>  <span class="number">-0.46760473</span> <span class="number">-0.38698462</span></span><br><span class="line"> <span class="number">-0.11467619</span> <span class="number">-0.9940818</span>  <span class="number">-1.1298056</span>   <span class="number">1.015201</span>    <span class="number">0.03592067</span>  <span class="number">0.6738027</span></span><br><span class="line"> <span class="number">-0.5814839</span>   <span class="number">0.1565634</span>  <span class="number">-0.06737513</span> <span class="number">-1.040216</span>   <span class="number">-0.9286871</span>  <span class="number">-0.11091176</span></span><br><span class="line"> <span class="number">-0.66596293</span>  <span class="number">0.03736701</span> <span class="number">-0.35337982</span> <span class="number">-0.4175317</span>  <span class="number">-0.47258058</span> <span class="number">-0.62383175</span></span><br><span class="line"> <span class="number">-0.86612004</span> <span class="number">-0.5230916</span>  <span class="number">-1.7838901</span>   <span class="number">0.08661752</span> <span class="number">-0.02590845</span>  <span class="number">0.23406455</span></span><br><span class="line">  <span class="number">0.77719927</span>  <span class="number">1.4410776</span>   <span class="number">0.41925532</span>  <span class="number">0.4560187</span>  <span class="number">-0.02141571</span>  <span class="number">0.7005563</span></span><br><span class="line"> <span class="number">-0.58727044</span> <span class="number">-0.39757103</span>  <span class="number">1.2808248</span>  <span class="number">-1.1874324</span>  <span class="number">-0.27268586</span> <span class="number">-0.82443166</span></span><br><span class="line">  <span class="number">0.39704558</span> <span class="number">-1.2778002</span>  <span class="number">-0.52762616</span> <span class="number">-0.26455742</span>  <span class="number">1.2137026</span>   <span class="number">0.04997367</span></span><br><span class="line">  <span class="number">0.05591454</span>  <span class="number">1.0264031</span>   <span class="number">1.5093948</span>  <span class="number">-0.5634581</span>  <span class="number">-1.1715719</span>  <span class="number">-0.646347</span></span><br><span class="line">  <span class="number">0.6021179</span>   <span class="number">0.6725963</span> ]</span><br></pre></td></tr></table></figure>

<p>5.1 test_tensorflow.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> six <span class="keyword">import</span> text_type <span class="keyword">as</span> _text_type</span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib.keras.api.keras.preprocessing <span class="keyword">import</span> image</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-n'</span>, type=_text_type, default=<span class="string">'kitModel'</span>,</span><br><span class="line">                    help=<span class="string">'Network structure file name.'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'-w'</span>, type=_text_type, required=<span class="literal">True</span>,</span><br><span class="line">                    help=<span class="string">'Network weights file name'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'--image'</span>, <span class="string">'-i'</span>,</span><br><span class="line">                    type=_text_type, help=<span class="string">'Test image path.'</span>,</span><br><span class="line">                    default=<span class="string">"face.jpeg"</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line"><span class="keyword">if</span> args.n.endswith(<span class="string">'.py'</span>):</span><br><span class="line">    args.n = args.n[:<span class="number">-3</span>]</span><br><span class="line"></span><br><span class="line">model_converted = __import__(args.n).KitModel(args.w)</span><br><span class="line">input_tf, model_tf = model_converted</span><br><span class="line"></span><br><span class="line">img = image.load_img(args.image, target_size = (<span class="number">112</span>, <span class="number">112</span>))</span><br><span class="line">img = image.img_to_array(img)</span><br><span class="line">img = img[..., ::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">input_data = np.expand_dims(img, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    init = tf.global_variables_initializer()</span><br><span class="line">    sess.run(init)</span><br><span class="line">    predict = sess.run(model_tf, feed_dict = &#123;input_tf : input_data&#125;)</span><br><span class="line">print(predict)</span><br></pre></td></tr></table></figure>

<p><strong>执行命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">python test_tensorflow.py -n tf_model.py -w tf_model.npy -i face.jpeg</span><br><span class="line"><span class="comment">#info:</span></span><br><span class="line">2019-10-25 17:51:37.745502: I tensorflow/core/common_runtime/process_util.cc:71] Creating new thread pool with default inter op setting: 12. Tune using inter_op_parallelism_threads <span class="keyword">for</span> best performance.</span><br><span class="line">[[ 0.3444912   0.10190725 -0.24501228  0.6819044   0.88096356  0.3477651</span><br><span class="line">  -0.9470245  -0.67586106 -0.43900767  0.8143126  -0.48990446 -0.43025535</span><br><span class="line">  -0.50643945 -0.27366814  0.63601726 -0.5352377   0.13765681  0.40842274</span><br><span class="line">   0.7652553  -0.8959763   0.42129317 -0.38290572  0.02023016 -0.14840023</span><br><span class="line">   0.91082776 -0.27738187 -0.60173315 -0.2149537   0.37644142  0.48894492</span><br><span class="line">  -0.8824413   0.3184655   0.19936629  0.2729676   1.5621389   0.4327973</span><br><span class="line">  -0.6486915  -0.23494866 -0.87087345 -0.77051604  0.09255352 -1.180374</span><br><span class="line">  -0.17184272  0.25432315 -0.19088425 -0.26873374  0.91608876 -0.18985137</span><br><span class="line">  -0.4793172  -0.3298719  -1.308598    1.2959337  -0.00581198  0.12396422</span><br><span class="line">   1.2034999   0.09919477 -1.9225347   0.92873377 -0.28599226  0.11249284</span><br><span class="line">  -1.4562793   1.876776   -1.2222495  -0.03905648  0.5152732   0.04876836</span><br><span class="line">   0.04672025 -0.32384863 -0.8834132   0.581934   -0.7378913  -0.30820462</span><br><span class="line">   0.22141635  0.72556514  0.2439455   0.6563256  -0.46760577 -0.38698506</span><br><span class="line">  -0.1146768  -0.9940842  -1.1298054   1.015199    0.03592021  0.67380327</span><br><span class="line">  -0.58148336  0.15656358 -0.06737413 -1.0402167  -0.9286856  -0.11091161</span><br><span class="line">  -0.66596127  0.03736706 -0.35337985 -0.41753066 -0.47258082 -0.62383235</span><br><span class="line">  -0.8661205  -0.52309173 -1.7838898   0.08661895 -0.02590791  0.23406385</span><br><span class="line">   0.7771991   1.4410769   0.41925538  0.45601875 -0.02141583  0.70055544</span><br><span class="line">  -0.587271   -0.3975702   1.2808259  -1.1874334  -0.27268624 -0.8244319</span><br><span class="line">   0.39704552 -1.2778007  -0.5276267  -0.2645575   1.2137012   0.04997464</span><br><span class="line">   0.05591418  1.0264043   1.5093954  -0.5634565  -1.1715722  -0.6463482</span><br><span class="line">   0.60211945  0.67259526]]</span><br></pre></td></tr></table></figure>

<h5 id="6-基于tf-model-npy和tf-model-py文件，固化参数，生成PB文件"><a href="#6-基于tf-model-npy和tf-model-py文件，固化参数，生成PB文件" class="headerlink" title="6.基于tf_model.npy和tf_model.py文件，固化参数，生成PB文件"></a>6.基于tf_model.npy和tf_model.py文件，固化参数，生成PB文件</h5><p>freeze_graph.py </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> tf_model <span class="keyword">as</span> tf_fun</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">netWork</span><span class="params">()</span>:</span></span><br><span class="line">    model=tf_fun.KitModel(<span class="string">"./tf_model.npy"</span>) <span class="comment">#调用tf_model.py中的KitModel函数加载npy权重参数</span></span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">freeze_graph</span><span class="params">(output_graph)</span>:</span></span><br><span class="line">    output_node_names = <span class="string">"output"</span></span><br><span class="line">    data,fc1=netWork()</span><br><span class="line">    fc1=tf.identity(fc1,name=<span class="string">"output"</span>)</span><br><span class="line"> </span><br><span class="line">    graph = tf.get_default_graph()  <span class="comment"># 获得默认的图</span></span><br><span class="line">    input_graph_def = graph.as_graph_def()  <span class="comment"># 返回一个序列化的图代表当前的图</span></span><br><span class="line">    init = tf.global_variables_initializer()</span><br><span class="line">    <span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">        sess.run(init)</span><br><span class="line">        output_graph_def = tf.graph_util.convert_variables_to_constants(  <span class="comment"># 模型持久化，将变量值固定</span></span><br><span class="line">            sess=sess,</span><br><span class="line">            input_graph_def=input_graph_def,  <span class="comment"># 等于:sess.graph_def</span></span><br><span class="line">            output_node_names=output_node_names.split(<span class="string">","</span>))  <span class="comment"># 如果有多个输出节点，以逗号隔开</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">with</span> tf.gfile.GFile(output_graph, <span class="string">"wb"</span>) <span class="keyword">as</span> f:  <span class="comment"># 保存模型</span></span><br><span class="line">            f.write(output_graph_def.SerializeToString())  <span class="comment"># 序列化输出</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    freeze_graph(<span class="string">"frozen_model.pb"</span>)</span><br><span class="line">    print(<span class="string">"finish!"</span>)</span><br></pre></td></tr></table></figure>

<p>python freeze_graph.py </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#info:</span></span><br><span class="line">Instructions <span class="keyword">for</span> updating:</span><br><span class="line">Use tf.compat.v1.graph_util.extract_sub_graph</span><br><span class="line">finish!</span><br></pre></td></tr></table></figure>

<p><strong>测试pb模型</strong></p>
<p>test_pb.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib.keras.api.keras.preprocessing <span class="keyword">import</span> image</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.gfile.FastGFile(<span class="string">'frozen_model.pb'</span>,<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    graph_def = tf.GraphDef()</span><br><span class="line">    graph_def.ParseFromString(f.read())</span><br><span class="line">    tf.import_graph_def(graph_def, name=<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    </span><br><span class="line">    img = image.load_img(<span class="string">'face.jpeg'</span>, target_size = (<span class="number">112</span>, <span class="number">112</span>))</span><br><span class="line">    img = image.img_to_array(img)</span><br><span class="line">    img = img[..., ::<span class="number">-1</span>]</span><br><span class="line">    input_data = np.expand_dims(img, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    init = tf.global_variables_initializer()</span><br><span class="line">    sess.run(init)</span><br><span class="line">    <span class="comment">#print(tf.get_default_graph().get_operations()) 根据输出值，可知输入tensor名为data 全连接层输出的tensor名为ouput</span></span><br><span class="line">    <span class="comment">#op = sess.graph.get_tensor_by_name('fc1/add_1:0')</span></span><br><span class="line">    <span class="comment">#predict = sess.run(op, feed_dict = &#123;'data:0' : input_data&#125;)</span></span><br><span class="line">    op = sess.graph.get_tensor_by_name(<span class="string">'output:0'</span>)</span><br><span class="line">    predict = sess.run(op, feed_dict = &#123;<span class="string">'data:0'</span> : input_data&#125;)</span><br><span class="line">print(predict)</span><br></pre></td></tr></table></figure>

<p>python test_pb.py</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#info:</span></span><br><span class="line">[[ 0.3444914   0.10190733 -0.2450121   0.68190414  0.8809633   0.3477656</span><br><span class="line">  -0.94702375 -0.6758606  -0.43900838  0.8143138  -0.48990518 -0.43025577</span><br><span class="line">  -0.5064386  -0.2736677   0.6360168  -0.5352382   0.13765849  0.40842175</span><br><span class="line">   0.7652537  -0.8959745   0.42129484 -0.3829043   0.02023116 -0.14839967</span><br><span class="line">   0.9108265  -0.27738202 -0.6017342  -0.21495399  0.37644026  0.48894358</span><br><span class="line">  -0.88244045  0.31846407  0.19936593  0.2729677   1.5621401   0.4327974</span><br><span class="line">  -0.6486902  -0.23494998 -0.8708729  -0.7705149   0.09255301 -1.1803752</span><br><span class="line">  -0.17184293  0.25432175 -0.19088468 -0.2687335   0.91608775 -0.18984997</span><br><span class="line">  -0.4793176  -0.32987317 -1.3085989   1.295933   -0.00581315  0.12396483</span><br><span class="line">   1.2034997   0.09919491 -1.9225343   0.9287349  -0.28599253  0.11249258</span><br><span class="line">  -1.4562799   1.876776   -1.222248   -0.03905599  0.5152738   0.04876841</span><br><span class="line">   0.04672143 -0.32384768 -0.88341135  0.58193433 -0.73789096 -0.30820417</span><br><span class="line">   0.22141536  0.7255656   0.24394391  0.65632653 -0.4676048  -0.38698527</span><br><span class="line">  -0.11467646 -0.9940818  -1.1298064   1.0152006   0.03592108  0.6738041</span><br><span class="line">  -0.5814836   0.1565624  -0.06737386 -1.0402162  -0.92868716 -0.1109117</span><br><span class="line">  -0.66596234  0.03736827 -0.35337996 -0.41753033 -0.4725821  -0.623832</span><br><span class="line">  -0.86612093 -0.5230911  -1.7838906   0.0866183  -0.02590806  0.23406453</span><br><span class="line">   0.77719873  1.4410781   0.41925526  0.45601833 -0.02141543  0.7005538</span><br><span class="line">  -0.5872698  -0.39757127  1.2808269  -1.1874311  -0.2726869  -0.8244321</span><br><span class="line">   0.39704597 -1.2778006  -0.5276277  -0.26455772  1.2137022   0.04997511</span><br><span class="line">   0.05591565  1.0264047   1.5093955  -0.56345737 -1.1715721  -0.64634734</span><br><span class="line">   0.60211873  0.67259526]]</span><br></pre></td></tr></table></figure>

<h5 id="7-pb模型转换为-tflite模型供tensorflow-lite调用-移动端部署"><a href="#7-pb模型转换为-tflite模型供tensorflow-lite调用-移动端部署" class="headerlink" title="7. .pb模型转换为.tflite模型供tensorflow lite调用(移动端部署)"></a>7. .pb模型转换为.tflite模型供tensorflow lite调用(移动端部署)</h5><p>pb2tflite.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">convert=tf.lite.TFLiteConverter.from_frozen_graph(<span class="string">"frozen_model.pb"</span>,input_arrays=[<span class="string">"data"</span>],</span><br><span class="line">                                                  output_arrays=[<span class="string">"output"</span>],</span><br><span class="line">                                                  input_shapes=&#123;<span class="string">"data"</span>:[<span class="number">1</span>,<span class="number">112</span>,<span class="number">112</span>,<span class="number">3</span>]&#125;)</span><br><span class="line">convert.post_training_quantize=<span class="literal">True</span> <span class="comment">#是否量化</span></span><br><span class="line">tflite_model=convert.convert()</span><br><span class="line">open(<span class="string">"mobilenet.tflite"</span>,<span class="string">"wb"</span>).write(tflite_model)</span><br><span class="line">print(<span class="string">"finish!"</span>)</span><br></pre></td></tr></table></figure>

<p>python pb2tflite.py</p>
<p>info: 文件夹中生成mobilenet.tflite</p>
<p>版权声明：原创,转载请注明来源,否则律师函警告</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/10/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/" data-id="ck4mhjkdj0048w6zw9mmrbhxw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/" rel="tag">模型转换</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mxnet Windows编译安装CPU版" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/19/mxnet%20Windows%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85CPU%E7%89%88/" class="article-date">
  <time datetime="2019-09-19T06:05:23.000Z" itemprop="datePublished">2019-09-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/19/mxnet%20Windows%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85CPU%E7%89%88/">mxnet Windows编译安装CPU版 c++ api</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="编译环境"><a href="#编译环境" class="headerlink" title="编译环境"></a>编译环境</h1><p>win10 x64 、Visual Studio 2015、cmake 3.0+、python2.7 (环境变量需配置)</p>
<h1 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h1><p>1.OpenBLAS-v0.2.14-Win64-int64 下载地址：<a href="https://sourceforge.net/projects/openblas/files/v0.2.14/" target="_blank" rel="noopener">https://sourceforge.net/projects/openblas/files/v0.2.14/</a></p>
<p>解压安装后，添加环境变量<strong>OpenBLAS_HOME</strong> 值为openblas的目录，即：your_dir/openblas</p>
<p>2.OpenCV 3.0+ 下载地址：<a href="https://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.3.1/opencv-3.3.1-vc14.exe/download" target="_blank" rel="noopener">https://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.3.1/opencv-3.3.1-vc14.exe/download</a></p>
<p>安装后，添加环境变量<strong>OpenCV_DIR</strong> 值为<strong>your_dir\opencv3.3.1\build</strong>,并在<strong>path</strong>环境变量中添加<strong>your_dir\opencv3.3.1\build\x64\vc14\bin</strong></p>
<h1 id="源码编译"><a href="#源码编译" class="headerlink" title="源码编译"></a>源码编译</h1><p>1.git clone项目到本地 <strong>（版本1.5.1）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/apache/incubator-mxnet mxnet</span><br></pre></td></tr></table></figure>

<p>2.在mxnet目录下创建build目录</p>
<p>3.启动cmake-gui.exe进行mxnet.sln工程的生成</p>
<p>设置mxnet源码路径和mxnet编译路径,点击configure,选择visual studio 2015 win64</p>
<p>生成的配置中，仅仅勾选<strong>use_opencv,use_openmp,use_cpp_package</strong>即可，如图所示</p>
<p><img src="/images/note/11.jpg" alt="11"></p>
<p>若提示找不到opencv路径，则手动设置opencv路径即可，如图所示</p>
<p><img src="/images/note/12.jpg" alt="11"></p>
<p>重新点击configure,配置选项未显示红框且最终信息显示Configuring done，则配置成功</p>
<p>若显示红框，则将显示红框的勾去掉，再重新configure（只保留<strong>use_opencv,use_openmp,use_cpp_package</strong>的勾选）</p>
<p>点击generate,生成mxnet.sln，生成成功会在build目录下出现mxnet.sln工程，如图所示</p>
<p><img src="/images/note/13.jpg" alt="11"></p>
<p>拷贝如下dll文件至mxnet\cpp-package\scripts目录下<br>libopenblas.dll<br>opencv_world331.dll opencv_ffmpeg331_64.dll<br>(来自opencv3.3.1安装目录)<br>libgcc_s_seh-1.dll libgfortran-3.dll libquadmath-0.dll<br>(来自mingw64_dll 下载地址：<a href="https://sourceforge.net/projects/openblas/files/v0.2.14/" target="_blank" rel="noopener">https://sourceforge.net/projects/openblas/files/v0.2.14/</a>)</p>
<p><img src="/images/note/17.jpg" alt="11"></p>
<p>4.利用visual studio 2015 打开mxnet.sln 并执行编译</p>
<p><img src="/images/note/14.jpg" alt="11"></p>
<p>右键ALL_BUILD,点击生成执行编译，编译成功后会在build/release生成mxnet.lib和mxnet.dll,同时会在mxnet\cpp-package\include\mxnet-cpp生成op.h头文件</p>
<p>如图所示</p>
<p><img src="/images/note/15.jpg" alt="11"></p>
<p><img src="/images/note/16.jpg" alt="11"></p>
<p><img src="/images/note/18.jpg" alt="11"></p>
<p>5.若自动生成op.h头文件失败，则手动生成c++ op.h头文件</p>
<p>重新configure（只保留<strong>use_opencv,use_openmp</strong>的勾选）再点击generate,生成mxnet.sln 重新利用Visual Studio 2015编译</p>
<p>拷贝如下dll文件至mxnet\cpp-package\scripts目录下</p>
<p>mxnet.dll<br>libopenblas.dll<br>opencv_world331.dll opencv_ffmpeg331_64.dll<br>(来自opencv3.3.1安装目录)<br>libgcc_s_seh-1.dll libgfortran-3.dll libquadmath-0.dll<br>(来自mingw64_dll 下载地址：<a href="https://sourceforge.net/projects/openblas/files/v0.2.14/" target="_blank" rel="noopener">https://sourceforge.net/projects/openblas/files/v0.2.14/</a>)</p>
<p><img src="/images/note/17.jpg" alt="11"></p>
<p>执行如下命令，生成op.h</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python OpWrapperGenerator.py mxnet.dll</span><br></pre></td></tr></table></figure>
<p><strong>错误处理</strong><br>1.<a href="https://github.com/apache/incubator-mxnet/issues/14116" target="_blank" rel="noopener">https://github.com/apache/incubator-mxnet/issues/14116</a><br>···bash<br>Build config:<br>1&gt;—— Build started: Project: cpp_package_op_h, Configuration: Release x64 ——<br>1&gt;”Running: OpWrapperGenerator.py”<br>1&gt;D:/Projects/MXNet-versions/MxNet1-3-1/build/Release/libmxnet.dll<br>1&gt;argument “lrs” of operator “multi_sgd_update” has unknown type “, required”<br>1&gt;argument “wds” of operator “multi_sgd_update” has unknown type “, required”<br>1&gt;argument “lrs” of operator “multi_sgd_mom_update” has unknown type “, required”<br>1&gt;argument “wds” of operator “multi_sgd_mom_update” has unknown type “, required”<br>1&gt;argument “lrs” of operator “multi_mp_sgd_update” has unknown type “, required”<br>1&gt;argument “wds” of operator “multi_mp_sgd_update” has unknown type “, required”<br>1&gt;argument “lrs” of operator “multi_mp_sgd_mom_update” has unknown type “, required”<br>1&gt;argument “wds” of operator “multi_mp_sgd_mom_update” has unknown type “, required”<br>========== Build: 1 succeeded, 0 failed, 3 up-to-date, 0 skipped ==========</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">解决方案：https:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;incubator-mxnet&#x2F;pull&#x2F;15144&#x2F;files</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/09/19/mxnet%20Windows%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85CPU%E7%89%88/" data-id="ck4mhjkcw0025w6zw7zsmbqfw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mxnet/" rel="tag">mxnet</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cmake教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/07/cmake%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2019-08-07T03:38:10.000Z" itemprop="datePublished">2019-08-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/07/cmake%E6%95%99%E7%A8%8B/">cmake教程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>1.hello world</strong> </p>
<p>main.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, World!"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CMakeLists.txt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.14) <span class="comment">#最低cmake版本</span></span><br><span class="line">project(<span class="built_in">test</span>) <span class="comment">#定义项目名称</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_STANDARD 11) <span class="comment">#设置c++编译标准版本</span></span><br><span class="line">add_executable(<span class="built_in">test</span> main.cpp)</span><br></pre></td></tr></table></figure>

<p>构建</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake . <span class="comment">#.代表本目录</span></span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>Note:</p>
<p>1.project(name)会同时隐式定义NAME_BINARY_DIR 以及NAME_SOURCE_DIR变量</p>
<p>2.SET(VAR [VALUE] [CACHE TYPE DOCSTRING [FORCE]]) 定义变量:set( SRC_LIST main.cpp test.cpp)</p>
<p>3.ADD_EXECUTABLE(test ${SRC_LIST}) 生成名为test的可执行文件 源文件为SRC_LIST</p>
<p>4.变量使用${}取值，在IF控制语句中直接使用变量名</p>
<p>指令(参数1 参数2 …) 指令不区分大小写 参数区分大小写</p>
<p>》〉》以上hello world 的编译为内部编译，无法删除中间文件</p>
<p>5.外部构建(通常的方式)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir build <span class="comment">#在工程目录任意位置 </span></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake .. <span class="comment">#..代表父目录(包含CMakeLists.txt构建文件)</span></span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>6.ADD_SUBDIRECTORY(source_dir [binary_dir] [EXCLUDE_FROM_ALL]) 当前工程添加源文件存放的子目录并指定目标二进制文件存放目录：</p>
<p>ADD_SUBDIRECTORY(src bin)</p>
<p>7.cmake -DCMAKE_INSTALL_PREFIX=/usr/local . #-DCMAKE_INSTALL_PREFIX指定安装目录</p>
<p>8.INSTALL指令 DCMAKE_INSTALL_PREFIX默认为/usr/local目录</p>
<p><strong>目标文件的安装</strong></p>
<p>INSTALL(<strong>TARGETS</strong> targets… </p>
<p>​                [</p>
<p>​                [ARCHIVE|LIBRARY|RUNTIME] </p>
<p>​                [DESTINATION (dir)]</p>
<p>​                [PERMISSIONS permissions…] </p>
<p>​                [CONFIGURATIONS [Debug|Release|…]</p>
<p>​                ]</p>
<p>​                [COMPONENT &lt;component&gt;] [OPTIONAL] ] […])</p>
<p>INSTALL(TARGETS myrun mylib mystaticlib </p>
<p>​               RUNTIME DESTINATION bin </p>
<p>​               LIBRARY DESTINATION lib </p>
<p>​               ARCHIVE DESTINATION libstatic ) </p>
<p>可执行文件 myrun 安装到${CMAKE_INSTALL_PREFIX}/bin 目录 </p>
<p>动态库 libmylib 安装到${CMAKE_INSTALL_PREFIX}/lib 目录 </p>
<p>静态库 libmystaticlib 安装到${CMAKE_INSTALL_PREFIX}/libstatic 目录</p>
<p><strong>普通文件的安装</strong></p>
<p>INSTALL(<strong>FILES</strong> files… </p>
<p>​              DESTINATION (dir)</p>
<p>​              [PERMISSIONS permissions…] [CONFIGURATIONS [Debug|Release|…]] [COMPONENT (component)] [RENAME (name)] [OPTIONAL])</p>
<p><strong>2.静态库与动态库构建</strong></p>
<p>ADD_LIBRARY(libname [SHARED|STATIC|MODULE] [EXCLUDE_FROM_ALL] source1 source2 … sourceN)</p>
<p>工程目录 CMakeLists.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PROJECT(HELLOLIB) </span><br><span class="line"></span><br><span class="line">ADD_SUBDIRECTORY(lib)</span><br></pre></td></tr></table></figure>

<p>līb目录下 CMakeLists.txt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SET(LIBHELLO_SRC hello.c) </span><br><span class="line"></span><br><span class="line">ADD_LIBRARY(hello SHARED <span class="variable">$&#123;LIBHELLO_SRC&#125;</span>) <span class="comment">#动态库</span></span><br><span class="line"></span><br><span class="line">ADD_LIBRARY(hello_static STATIC <span class="variable">$&#123;LIBHELLO_SRC&#125;</span>) <span class="comment">#静态库</span></span><br><span class="line"></span><br><span class="line">SET_TARGET_PROPERTIES(hello_static PROPERTIES OUTPUT_NAME <span class="string">"hello"</span>) <span class="comment">#使得动态库和静态库同名</span></span><br><span class="line"></span><br><span class="line">SET_TARGET_PROPERTIES(hello PROPERTIES CLEAN_DIRECT_OUTPUT 1) <span class="comment">#防止同名时被清理</span></span><br><span class="line"></span><br><span class="line">SET_TARGET_PROPERTIES(hello_static PROPERTIES CLEAN_DIRECT_OUTPUT 1) <span class="comment">#防止同名时被清理</span></span><br><span class="line">INSTALL(TARGETS hello hello_static </span><br><span class="line">				LIBRARY DESTINATION lib </span><br><span class="line">				ARCHIVE DESTINATION lib)</span><br></pre></td></tr></table></figure>

<p>构建并安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir build </span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr .. </span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>lib目录生成libhello.so libhello.a文件,并安装到/usr/bin目录</p>
<p><strong>3.外部共享库和头文件的使用</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INCLUDE_DIRECTORIES([AFTER|BEFORE] [SYSTEM] dir1 dir2 ...) <span class="comment">#添加包含目录指令</span></span><br><span class="line"></span><br><span class="line">INCLUDE_DIRECTORIES(/usr/include/hello)</span><br><span class="line"></span><br><span class="line">LINK_DIRECTORIES(directory1 directory2 ...) 添加共享库目录</span><br><span class="line"></span><br><span class="line">TARGET_LINK_LIBRARIES(target library1 library2 ...) <span class="comment">#为目标文件添加需要的共享库</span></span><br><span class="line"></span><br><span class="line">TARGET_LINK_LIBRARIES(main libhello.so) <span class="comment">#动态库</span></span><br><span class="line"></span><br><span class="line">TARGET_LINK_LIBRARIES(main libhello.a) <span class="comment">#静态库</span></span><br></pre></td></tr></table></figure>

<p><strong>4.cmake 常用指令</strong></p>
<p>ADD_DEFINITIONS(-D…)：向 C/C++编译器添加-D 定义</p>
<p>AUX_SOURCE_DIRECTORY(dir VARIABLE)：发现一个目录下所有的源代码文件并将列表存储在一个变量中</p>
<p>AUX_SOURCE_DIRECTORY(. SRC_LIST)</p>
<p>ADD_EXECUTABLE(main ${SRC_LIST})</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/08/07/cmake%E6%95%99%E7%A8%8B/" data-id="ck4mhjkca000hw6zwd17z3t02" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/make/" rel="tag">make</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-数据结构(7) 排序" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(7)%20%E6%8E%92%E5%BA%8F/" class="article-date">
  <time datetime="2019-07-19T06:09:11.000Z" itemprop="datePublished">2019-07-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(7)%20%E6%8E%92%E5%BA%8F/">数据结构(7) 排序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h1><p><strong>直接插入排序</strong></p>
<p>把$n$个待排序的元素假设为一个有序表和一个无序表，开始时有序表中只包含1个元素，无序表中包含有n-1个元素，排序过程中每次从无序表中取出第一个元素，将它插入到有序表中的适当位置，使之成为新的有序表，重复n-1次即可完成排序过程</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i, j, key;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">array</span>[i] &lt; <span class="built_in">array</span>[i - <span class="number">1</span>]) &#123;</span><br><span class="line">			key = <span class="built_in">array</span>[i];<span class="comment">//设置为哨兵</span></span><br><span class="line">            <span class="comment">//找到合适的插入位置并将比key大的元素后移</span></span><br><span class="line">			<span class="keyword">for</span> (j = i - <span class="number">1</span>; key &lt; <span class="built_in">array</span>[j] &amp;&amp; j &gt;= <span class="number">0</span>; --j)</span><br><span class="line">				<span class="built_in">array</span>[j + <span class="number">1</span>] = <span class="built_in">array</span>[j];</span><br><span class="line">			<span class="built_in">array</span>[j + <span class="number">1</span>] = key;<span class="comment">//插入</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>折半插入排序</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertSortbyHalf</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j,key,mid,low,high;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">array</span>[i] &lt; <span class="built_in">array</span>[i<span class="number">-1</span>])&#123;</span><br><span class="line">            key = <span class="built_in">array</span>[i];</span><br><span class="line">            low = <span class="number">0</span>,high = i<span class="number">-1</span>;</span><br><span class="line">          	<span class="comment">//找到插入的位置</span></span><br><span class="line">            <span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line">                mid = (low + high) / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span>(key &lt; <span class="built_in">array</span>[mid])</span><br><span class="line">                    high = mid - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    low = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          	<span class="comment">//统一移动元素</span></span><br><span class="line">            <span class="keyword">for</span>(j = i<span class="number">-1</span>;j &gt;= high+<span class="number">1</span>;j--)&#123;</span><br><span class="line">                <span class="built_in">array</span>[j+<span class="number">1</span>] = <span class="built_in">array</span>[j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">array</span>[j+<span class="number">1</span>] = key;<span class="comment">//插入</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>希尔排序</strong></p>
<p>增量序列 $d_1，d_2，\cdots，d_k$，其中 $d_1=n/2,d_{i+1}=[d_i/2],d_k = 1$；</p>
<p>按增量序列个数 $k$，对序列进行 $k$ 趟排序；</p>
<p>每趟排序，先根据对应的增量 $d_i$，将待排序序列分割为$d_i$个组，距离为$d_i$的元素为同一组，再对每个组进行直接插入排序，直到$d_i =1$,即所有元素已在同一组中，再进行一次直接插入排序</p>
<p><img src="%5Cimages%5CdataStructure%5C81.png" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> di, i,j, key;</span><br><span class="line">	<span class="keyword">for</span> (di = n/<span class="number">2</span>; di &gt;= <span class="number">1</span>; di = di/<span class="number">2</span>) &#123;<span class="comment">//设置增量</span></span><br><span class="line">        <span class="comment">//分组并进行插入排序</span></span><br><span class="line">		<span class="keyword">for</span> (i = di; i &lt; n; i++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">array</span>[i] &lt; <span class="built_in">array</span>[i - di]) &#123;</span><br><span class="line">				key = <span class="built_in">array</span>[i];</span><br><span class="line">				<span class="keyword">for</span> (j = i - di; j &gt;= <span class="number">0</span> &amp;&amp; key &lt; <span class="built_in">array</span>[j]; j = j - di) &#123;</span><br><span class="line">					<span class="built_in">array</span>[j + di] = <span class="built_in">array</span>[j];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">array</span>[j + di] = key;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="交换排序"><a href="#交换排序" class="headerlink" title="交换排序"></a>交换排序</h1><p><strong>冒泡排序</strong></p>
<p>每次比较两个相邻的元素，如果其顺序错误就交换</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> key;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n<span class="number">-1</span>;i++) &#123;</span><br><span class="line">		<span class="comment">//LEN-i:每一次都已归位一个数,不再需要与已归位的数比较</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">array</span>[j] &gt; <span class="built_in">array</span>[j + <span class="number">1</span>]) &#123;</span><br><span class="line">				key = <span class="built_in">array</span>[j];</span><br><span class="line">				<span class="built_in">array</span>[j] = <span class="built_in">array</span>[j + <span class="number">1</span>];</span><br><span class="line">				<span class="built_in">array</span>[j + <span class="number">1</span>] = key;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>快速排序</strong></p>
<p>1.设置两个变量$i,j$，初始化：$i=0，j=n-1$；<br>2.基准数$key=array[0]$；<br>3.从$j$开始向前搜索，即由后开始向前搜索$(j–)$，找到第一个小于$key$的值$array[j]$，将$array[j]$和$array[i]$的值交换；<br>4.从$i$开始向后搜索，即由前开始向后搜索$(i++)$，找到第一个大于key的$array[i]$，将$array[i]$和$array[j]$的值交换；<br>5.重复第3、4步，直到$i=j$；</p>
<p>经过一趟上述步骤后，基准数左边全小于基准数，基准数右边全大于基准数，通过分治法继续处理左、右</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (left &gt;= right)&#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> i = left;</span><br><span class="line">	<span class="keyword">int</span> j = right;</span><br><span class="line">	<span class="keyword">int</span> key = <span class="built_in">array</span>[left];<span class="comment">//基准数</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (i &lt; j)&#123;</span><br><span class="line">        <span class="comment">//向前寻找小于key的数</span></span><br><span class="line">		<span class="keyword">while</span> (i &lt; j &amp;&amp; key &lt;= <span class="built_in">array</span>[j])&#123;</span><br><span class="line">			j--;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">array</span>[i] = <span class="built_in">array</span>[j];</span><br><span class="line">        <span class="comment">//向后寻找大于key的数</span></span><br><span class="line">		<span class="keyword">while</span> (i &lt; j &amp;&amp; key &gt;= <span class="built_in">array</span>[i])&#123;</span><br><span class="line">			i++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">array</span>[j] = <span class="built_in">array</span>[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">array</span>[i] = key;<span class="comment">//基准数归位</span></span><br><span class="line">	quickSort(<span class="built_in">array</span>, left, i - <span class="number">1</span>);<span class="comment">//分治处理左边</span></span><br><span class="line">	quickSort(<span class="built_in">array</span>, i + <span class="number">1</span>, right);<span class="comment">//分治处理右边</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h1><p><strong>简单选择排序</strong></p>
<p>(1)在未排序序列中找到最小/大元素，存放到排序序列的起始位置;(2)再从剩余未排序元素中继续寻找最小/大元素，放到已排序序列的末尾;重复第二步，直到所有元素均排序完毕</p>
<p><img src="%5Cimages%5CdataStructure%5CselectionSort.gif" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectSort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">int</span> <span class="built_in">min</span> = i;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">array</span>[j] &lt; <span class="built_in">array</span>[<span class="built_in">min</span>])</span><br><span class="line">				<span class="built_in">min</span> = j;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (i != <span class="built_in">min</span>) &#123;</span><br><span class="line">			<span class="keyword">int</span> temp = <span class="built_in">array</span>[i];</span><br><span class="line">			<span class="built_in">array</span>[i] = <span class="built_in">array</span>[<span class="built_in">min</span>];</span><br><span class="line">			<span class="built_in">array</span>[<span class="built_in">min</span>] = temp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>堆排序</strong></p>
<p>堆是具有以下性质的完全二叉树：</p>
<p>1.每个结点的值都大于或等于其左右孩子结点的值，称为大顶堆；</p>
<p>2.每个结点的值都小于或等于其左右孩子结点的值，称为小顶堆；</p>
<p><img src="%5Cimages%5CdataStructure%5C45.jpg" alt=""></p>
<p>堆排序算法步骤：</p>
<p>1.构造初始堆，将无序序列构造为大顶堆，从倒数第一个非叶子结点开始调整,从左至右，从下至上进行调整；</p>
<p>倒数第$i$个非叶子结点索引$index=array.length/2^i-1(i=1,2,3\dots|2^i\leqslant  array.length)$</p>
<p><img src="%5Cimages%5CdataStructure%5C46.jpg" alt=""></p>
<p>2.将堆顶元素与末尾元素进行交换，使末尾元素最大，然后继续调整堆，再将堆顶元素与末尾元素交换，得到第二大元素，如此反复进行交换、重建、交换…</p>
<p><img src="%5Cimages%5CdataStructure%5C47.jpg" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span>* b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp = *b;</span><br><span class="line">	*b = *a;</span><br><span class="line">	*a = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">max_heapify</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> start, <span class="keyword">int</span> <span class="built_in">end</span>)</span></span>&#123;</span><br><span class="line">	<span class="comment">//建立父节点指标和子结点指标</span></span><br><span class="line">	<span class="keyword">int</span> dad = start;</span><br><span class="line">	<span class="keyword">int</span> son = dad * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (son &lt;= <span class="built_in">end</span>)&#123;<span class="comment">//若子结点索引在范围内才做比较</span></span><br><span class="line">		<span class="comment">//先比较两个子结点大小，选择最大的</span></span><br><span class="line">		<span class="keyword">if</span> (son + <span class="number">1</span> &lt;= <span class="built_in">end</span> &amp;&amp; <span class="built_in">array</span>[son] &lt; <span class="built_in">array</span>[son + <span class="number">1</span>])</span><br><span class="line">			son++;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">array</span>[dad] &gt; <span class="built_in">array</span>[son]) <span class="comment">//如果父节点大於子结点代表调整完毕，直接跳出函数</span></span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			swap(&amp;<span class="built_in">array</span>[dad], &amp;<span class="built_in">array</span>[son]);</span><br><span class="line">			dad = son;</span><br><span class="line">			son = dad * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heap_sort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="comment">//初始化，生成最大堆</span></span><br><span class="line">	<span class="keyword">for</span> (i = len / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">		max_heapify(<span class="built_in">array</span>, i, len - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//堆顶元素与末尾元素进行交换，再重新调整，直到排序完毕</span></span><br><span class="line">	<span class="keyword">for</span> (i = len - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--)&#123;</span><br><span class="line">		swap(&amp;<span class="built_in">array</span>[<span class="number">0</span>], &amp;<span class="built_in">array</span>[i]);</span><br><span class="line">		max_heapify(<span class="built_in">array</span>, <span class="number">0</span>, i - <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h1><p>假定含有$n$个元素的待排序表，则可视为$n$个有序的子表，每个子表长度为1，然后两两归并，得到[$n/2$]个长度为2或1的有序表；再两两归并$\cdots$,直到合并长度为$n$的有序表为止</p>
<p><img src="%5Cimages%5CdataStructure%5C82.png" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> low, <span class="keyword">int</span> mid, <span class="keyword">int</span> high, <span class="keyword">int</span> temp[])</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i = low, j = mid + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> m = mid, n = high;</span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt;= m &amp;&amp; j &lt;= n)&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">array</span>[i] &lt;= <span class="built_in">array</span>[j])</span><br><span class="line">			temp[k++] = <span class="built_in">array</span>[i++];</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			temp[k++] = <span class="built_in">array</span>[j++];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (i &lt;= m)</span><br><span class="line">		temp[k++] = <span class="built_in">array</span>[i++];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (j &lt;= n)</span><br><span class="line">		temp[k++] = <span class="built_in">array</span>[j++];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">		<span class="built_in">array</span>[low + i] = temp[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergesort</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> low, <span class="keyword">int</span> high, <span class="keyword">int</span> temp[])</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (low &lt; high)&#123;</span><br><span class="line">		<span class="keyword">int</span> mid = (low + high) / <span class="number">2</span>;</span><br><span class="line">		mergesort(<span class="built_in">array</span>, low, mid, temp);    </span><br><span class="line">		mergesort(<span class="built_in">array</span>, mid + <span class="number">1</span>, high, temp); </span><br><span class="line">		merge(<span class="built_in">array</span>, low, mid, high, temp);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><img src="%5Cimages%5CdataStructure%5C83.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/07/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(7)%20%E6%8E%92%E5%BA%8F/" data-id="ck4mhjkdi0045w6zw44kh1z5g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-数据结构(6) 查找" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(6)%20%E6%9F%A5%E6%89%BE/" class="article-date">
  <time datetime="2019-07-16T06:11:05.000Z" itemprop="datePublished">2019-07-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(6)%20%E6%9F%A5%E6%89%BE/">数据结构(6) 查找</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="顺序查找"><a href="#顺序查找" class="headerlink" title="顺序查找"></a>顺序查找</h1><p>1.一般线性表</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    ElemType *elem;<span class="comment">//0号单元留空</span></span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">&#125;STable;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(STable table,ElemType key)</span></span>&#123;</span><br><span class="line">    table.elem[<span class="number">0</span>] = key;<span class="comment">//哨兵</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = table.length;table.elem[i] != key; --i);</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="折半查找"><a href="#折半查找" class="headerlink" title="折半查找"></a>折半查找</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">binary_search</span><span class="params">(SeqList <span class="built_in">list</span>,ElemType key)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> low = <span class="number">0</span>;high = <span class="built_in">list</span>.length<span class="number">-1</span>;mid;</span><br><span class="line">    <span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line">        mid = (low+high)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">list</span>.elem[mid] == key)</span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">list</span>.elem[mid] &lt; key)</span><br><span class="line">            low = mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            high = mid<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;<span class="comment">//查找失败</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="B树和B-树"><a href="#B树和B-树" class="headerlink" title="B树和B+树"></a>B树和B+树</h1><p>$B$树中所有结点的子结点数的最大值称为$B$树的阶，一个 $m$ 阶的$B$树是一个有以下属性的树：</p>
<p><strong>1</strong>.每一个结点最多有 $m $个子结点，即每个结点至多含有$m-1$个关键字<br>2.每一个非叶子结点（除根结点）最少有 $⌈m/2⌉$ 个子结点,即至少含有$[m/2]-1$个关键字<br>3.如果根结点不是叶子结点，那么它至少有两个子结点<br>4.有 $k$ 个子结点的非叶子结点拥有 $k − 1$ 个键<br>5.所有的叶子结点都在同一层</p>
<p>非根内部结点的关键字个数$n$范围：$[m/2]-1 \leq n \leq m-1$,根结点关键字个数$n$范围：$1 \leq n\leq m-1$</p>
<p>每一个内部结点的键将结点的子树分开。</p>
<p>例如，如果一个内部结点有3个子结点（子树），那么它就必须有两个键： $a_1 $和 $a_2$ </p>
<p>左边子树的所有值都必须小于 $a_1$ ，中间子树的所有值都必须在 $a_1$ 和$a_2$ 之间，右边子树的所有值都必须大于$ a_2$ </p>
<p><img src="%5Cimages%5CdataStructure%5C44.jpg" alt=""></p>
<p><strong>B树的查找</strong></p>
<p>1.在$B$中找结点 (读入内存) 2.在结点内找关键字(通过顺序查找或折半查找查找等于key的关键字)</p>
<p><strong>B树的插入</strong></p>
<p>所有的插入都从根结点开始，要插入一个新的元素，首先搜索这棵树，找到新元素应该被添加到的叶子结点</p>
<p>将新元素插入到这一结点中的步骤如下：</p>
<p>如果结点拥有的元素数量小于最大值，那么有空间容纳新的元素，将新元素插入到这一结点，且保持结点中元素有序，否则这一结点已经满了，将它平均地分裂成两个结点：从叶子结点的元素和新的元素中选择出中位数；小于这一中位数的元素放入左边结点，大于这一中位数的元素放入右边结点，中位数作为分隔值.<br><strong>分隔值被插入到父结点中</strong>，这可能会造成父结点分裂，分裂父结点时可能又会使它的父结点分裂，以此类推.如果没有父结点（这一结点是根结点），就创建一个新的根结点（增加了树的高度）,即如果分裂一直上升到根节点，那么一个新的根节点会被创建，它有一个分隔值和两个子节点</p>
<blockquote>
<p>以5阶B树为例</p>
</blockquote>
<p>[]: <a href="https://www.cnblogs.com/nullzx/p/8729425.html" target="_blank" rel="noopener">https://www.cnblogs.com/nullzx/p/8729425.html</a></p>
<p>1.空树中插入39</p>
<p><img src="%5Cimages%5CdataStructure%5C45.png" alt=""></p>
<p>2.继续插入22，97和41</p>
<p><img src="%5Cimages%5CdataStructure%5C46.png" alt=""></p>
<p>3.继续插入53</p>
<p><img src="%5Cimages%5CdataStructure%5C47.png" alt=""></p>
<p>插入后超过了最大允许的关键字个数4，需以中位数(41)为中心进行分裂</p>
<p><img src="%5Cimages%5CdataStructure%5C48.png" alt=""></p>
<p>4.依次插入13，21，40，同样会造成分裂，结果如下图</p>
<p><img src="%5Cimages%5CdataStructure%5C49.png" alt=""></p>
<p>5.依次插入30，27, 33 ；36，35，34 ；24，29</p>
<p><img src="%5Cimages%5CdataStructure%5C50.png" alt=""></p>
<p>6.插入key值为26的记录</p>
<p><img src="%5Cimages%5CdataStructure%5C51.png" alt=""></p>
<p>当前结点需要以27为中心分裂,并向父结点插入27</p>
<p><img src="%5Cimages%5CdataStructure%5C52.png" alt=""></p>
<p>插入后导致当前结点（即根结点）也需要分裂</p>
<p><img src="%5Cimages%5CdataStructure%5C53.png" alt=""></p>
<p><strong>B树的删除</strong></p>
<p>删除时，需要判断结点中关键字的个数$\geqslant [m/2]-1$</p>
<blockquote>
<p>5阶B树为例，结点最多有4个key,最少有2个key</p>
</blockquote>
<p>[]: <a href="https://www.cnblogs.com/nullzx/p/8729425.html" target="_blank" rel="noopener">https://www.cnblogs.com/nullzx/p/8729425.html</a></p>
<p><img src="%5Cimages%5CdataStructure%5C54.png" alt=""></p>
<p>1.B树中删除21，删除后结点中的关键字个数仍然大于等2，删除结束</p>
<p><img src="%5Cimages%5CdataStructure%5C55.png" alt=""></p>
<p>2.删除27，27位于非叶子结点中，利用27的后继28替代</p>
<p><img src="%5Cimages%5CdataStructure%5C56.png" alt=""></p>
<p>删除后，当前叶子结点的关键字的个数小于2，而它的兄弟结点中有3个关键字，从兄弟结点中借取一个关键字</p>
<p><img src="%5Cimages%5CdataStructure%5C57.png" alt=""></p>
<p>3.删除32</p>
<p><img src="%5Cimages%5CdataStructure%5C58.png" alt=""></p>
<p>删除后，当前结点中只有一个关键字，而兄弟结点中也仅有2个关键字，只能让父结点中的30下移并和兄弟结点中的关键字合并，成为一个新的结点，当前结点的指针指向父结点</p>
<p><img src="%5Cimages%5CdataStructure%5C59.png" alt=""></p>
<p>4.删除40</p>
<p><img src="%5Cimages%5CdataStructure%5C60.png" alt=""></p>
<p>同理，当前结点的关键字数小于2，兄弟结点中没有多余关键字，所以父结点中的关键字下移，和兄弟结点(左右兄弟结点都可)的关键字合</p>
<p><img src="%5Cimages%5CdataStructure%5C61.png" alt=""></p>
<p>当前结点关键字个数小于2，继续合并</p>
<p><img src="%5Cimages%5CdataStructure%5C62.png" alt=""></p>
<p><strong>B+树</strong></p>
<p>1.每个分支结点最多有$m$个子结点</p>
<p>2.结点的子结点个数与关键字个数相等(或结点的子结点个数 = 关键字个数+1)</p>
<p>3.所有叶结点包含全部关键字及指向记录的指针，且叶结点中关键字按大小顺序排列，所有相邻结点按大小顺序互相链接</p>
<p>4.非根内部结点的关键字个数$n$范围：$[m/2] \leq n \leq m$,根结点关键字个数$n$范围：$1 \leq n\leq m$</p>
<p><img src="%5Cimages%5CdataStructure%5C63.png" alt=""></p>
<p><strong>B+树的插入</strong></p>
<blockquote>
<p>以5阶B树为例</p>
</blockquote>
<p>1.空树中插入5</p>
<p><img src="%5Cimages%5CdataStructure%5C64.png" alt=""></p>
<p>2.依次插入8，10，15</p>
<p><img src="%5Cimages%5CdataStructure%5C65.png" alt=""></p>
<p>3.插入16</p>
<p>插入16后超过了关键字的个数限制，需进行分裂</p>
<p><img src="%5Cimages%5CdataStructure%5C66.png" alt=""></p>
<p>4.插入17</p>
<p><img src="%5Cimages%5CdataStructure%5C67.png" alt=""></p>
<p>5.插入18</p>
<p><img src="%5Cimages%5CdataStructure%5C68.png" alt=""></p>
<p>当前结点的关键字个数大于限制的个数，需进行分裂</p>
<p><img src="%5Cimages%5CdataStructure%5C69.png" alt=""></p>
<p>6.插入若干数据</p>
<p><img src="%5Cimages%5CdataStructure%5C70.png" alt=""></p>
<p>7.插入7</p>
<p><img src="%5Cimages%5CdataStructure%5C71.png" alt=""></p>
<p>当前结点的关键字个数大于限制的个数，需进行分裂</p>
<p><img src="%5Cimages%5CdataStructure%5C72.png" alt=""></p>
<p>当前结点的关键字个数大于限制的个数，需进行分裂</p>
<p><img src="%5Cimages%5CdataStructure%5C73.png" alt=""></p>
<p><strong>B+树的删除</strong></p>
<blockquote>
<p>以5阶B树为例</p>
</blockquote>
<p><img src="%5Cimages%5CdataStructure%5C74.png" alt=""></p>
<p>1.删除22</p>
<p><img src="%5Cimages%5CdataStructure%5C75.png" alt=""></p>
<p>2.删除15</p>
<p><img src="%5Cimages%5CdataStructure%5C76.png" alt=""></p>
<p>删除后当前结点只有一个关键字，不满足条件，而兄弟结点有三个关键字，从兄弟结点中借关键字为9,同时更新将父结点中的关键字由10变为9，删除结束</p>
<p><img src="%5Cimages%5CdataStructure%5C77.png" alt=""></p>
<p>3.删除7</p>
<p><img src="%5Cimages%5CdataStructure%5C78.png" alt=""></p>
<p><img src="%5Cimages%5CdataStructure%5C79.png" alt=""></p>
<p><img src="%5Cimages%5CdataStructure%5C80.png" alt=""></p>
<h1 id="散列-hash-表"><a href="#散列-hash-表" class="headerlink" title="散列(hash)表"></a>散列(hash)表</h1><p><strong>散列函数</strong></p>
<p>一个把查找表中的关键字映射为该关键字对应的地址函数，记$Hash(key)=Address$</p>
<p>1.直接定址法 $Hash(key)=a\times key+b$，($a,b$未常数)</p>
<p>2.除留余数法 $Hash(key)=key%p$，($p$为质数)</p>
<p>3.数字分析法 设关键字是$r$进制数，选取数码分布较为均匀的若干位作为散列地址</p>
<p>4.平方取中法 取关键字的平方值的中间几位作为散列地址</p>
<p>5.折叠法 将关键字分割成位数相同的块，取块的叠加和作为散列地址</p>
<p><strong>冲突处理</strong></p>
<p>散列函数可能会把两个或两个以上的的不同关键字映射到同一地址，这种情况称为”冲突”</p>
<p>设散列函数为$Hash(key),H_i$表示发生冲突后第$i$次探测的散列地址</p>
<p>1.开放定址法<br>$$<br>H_i=(Hash(key)+d_i)%m<br>$$<br>$m$表示散列表长度，$d_i$为增量序列</p>
<p>$d_i$的选取方法：</p>
<p>1) 线性探测法 $d_i=0,1,2,3,\cdots,m-1$</p>
<p>2) 平方探测法 $d_i=0^2,1^2,-1^2,2^2,-2^2,\cdots ,k^2,-k^2(k\leqslant m/2)$</p>
<p>3) 再散列法或双散列法 $d_i=Hash_2(key)$，即$H_i=(Hash(key)+i*Hash_2(key))%m$($i$为冲突次数)</p>
<p>4) 伪随机序列法 $d_i=$伪随机数序列</p>
<p>2.拉链法</p>
<p>同义词存储在一个线性链表$L_i$中,散列地址为$i$的同义词链表$L_i$的头指针存放在散列表第$i$个单元中</p>
<p><strong>散列查找过程</strong></p>
<p>1.初始化：$address = Hash(key)$</p>
<p>2.若$L[address]=NULL$,则查找失败；若$L[address]\neq NULL$且$L[address]\neq key$，则$H_1=(address+1)%m$,若$L[H_1]\neq NULL$且$L[H_1]\neq key$,则$H_2=(H_1+2)%m$,若$L[H_2]\neq NULL$且$L[H_1]\neq key$,则$H_3=\cdots$</p>
<p>重复执行$H_{i+1}=(H_i+(i+1))%m$ ($i=1,2,3,\cdots,m-1$),直到$L[H_{i+1}]=key或L[H_{i+1}]=NULL$</p>
<h1 id="字符串模式匹配"><a href="#字符串模式匹配" class="headerlink" title="字符串模式匹配"></a>字符串模式匹配</h1><p>1.简单的模式匹配算法</p>
<p>从主串S的指定字符开始，和模式串的第一个字符比较，若相等则继续逐个比较后续字符，直到模式串中的每个字符依次和主串的一个连续字符序列相等，则匹配成功；若比较过程中有某对字符不相等，则从主串的下一个字符重新与模式串的第一个字符相比较。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">matching</span><span class="params">(<span class="keyword">String</span> target, <span class="keyword">String</span> pattern, <span class="keyword">int</span> <span class="built_in">begin</span>)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// i为目标串target的索引</span></span><br><span class="line">		<span class="keyword">int</span> i = <span class="built_in">begin</span>;</span><br><span class="line">		<span class="comment">// j为模式串pattern的索引</span></span><br><span class="line">		<span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span> (target == null || pattern == null || <span class="built_in">begin</span> &gt; target.length()) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span> (i &lt; target.length() &amp;&amp; j &lt; pattern.length())&#123;</span><br><span class="line">			<span class="keyword">if</span> (target[i] == pattern[j]) &#123;</span><br><span class="line">				i++;</span><br><span class="line">				j++;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				i = i - j + <span class="number">1</span>;</span><br><span class="line">				j = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 模式串是否存在于目标串</span></span><br><span class="line">		<span class="keyword">if</span> (j == pattern.length()) &#123;</span><br><span class="line">			<span class="keyword">return</span> i - pattern.length() ;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>2.KMP模式匹配算法</p>
<p>wait</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/07/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(6)%20%E6%9F%A5%E6%89%BE/" data-id="ck4mhjkdd003nw6zw2vdv2660" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-opencv3(2) 图像载入-显示-输出" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/10/opencv3(2)%20%E5%9B%BE%E5%83%8F%E8%BD%BD%E5%85%A5-%E6%98%BE%E7%A4%BA-%E8%BE%93%E5%87%BA/" class="article-date">
  <time datetime="2019-07-10T06:24:06.000Z" itemprop="datePublished">2019-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/opencv3/">opencv3</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/10/opencv3(2)%20%E5%9B%BE%E5%83%8F%E8%BD%BD%E5%85%A5-%E6%98%BE%E7%A4%BA-%E8%BE%93%E5%87%BA/">opencv3(2) 图像载入-显示-输出</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>载入函数</li>
</ul>
<pre><code class="cpp">Mat imread( const String&amp; filename, int flags = IMREAD_COLOR );
IMREAD_UNCHANGED   = -1, //!&lt; If set, return the loaded image as is (with alpha channel, otherwise it gets cropped).
IMREAD_GRAYSCALE   = 0,  //!&lt; If set, always convert image to the single channel grayscale image.
IMREAD_COLOR       = 1,  //!&lt; If set, always convert image to the 3 channel BGR color image.
IMREAD_ANYDEPTH    = 2,  //!&lt; If set, return 16-bit/32-bit image when the input has the corresponding depth, otherwise convert it to 8-bit.
IMREAD_ANYCOLOR    = 4,  //!&lt; If set, the image is read in any possible color format.
Mat img = imread(&quot;D:/learn/dota.jpg&quot;);
</code></pre>
<ul>
<li>显示函数</li>
</ul>
<pre><code class="cpp">imshow(&quot;dota&quot;, img); </code></pre>
<ul>
<li>输出函数</li>
</ul>
<pre><code class="cpp">bool imwrite( const String&amp; filename, InputArray img,
              const std::vector&lt;int&gt;&amp; params = std::vector&lt;int&gt;());
imwrite(&quot;D:/new_dota.jpg&quot;, img);</code></pre>
<ul>
<li><p>实例</p>
<pre><code class="cpp">#include &lt;iostream&gt;  
#include &lt;opencv2/core/core.hpp&gt;  
#include &lt;opencv2/highgui/highgui.hpp&gt;  
using namespace cv;
int main() {
  //图像显示
  Mat logo = imread(&quot;D:/learn/logo.jpg&quot;);
  imshow(&quot;logo&quot;, logo);

  //图像混合
  Mat img = imread(&quot;D:/learn/dota.jpg&quot;);
  imshow(&quot;img&quot;, img);
  Mat imgROI;
  imgROI = img(Rect(800, 350, logo.cols, logo.rows));
  //logo加载到背景图
  addWeighted(imgROI,0.5,logo,0.3,0,imgROI);
  imshow(&quot;dota_logo&quot;, img);

  //保存混合的图像
  imwrite(&quot;D:/learn/dota_logo.jpg&quot;,img);
  waitKey(0);
}</code></pre>
<p><img src="/images/opencv3/18.jpg" alt=""><br><img src="/images/opencv3/19.jpg" alt=""><br><img src="/images/opencv3/20.jpg" alt=""><br><img src="/images/opencv3/21.jpg" alt=""></p>
</li>
<li><p>读取视频文件 调用摄像头 写入视频文件</p>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;opencv2/opencv.hpp&gt;
using namespace std;
using namespace cv;
int main() {
  namedWindow(&quot;cap&quot;, cv::WINDOW_AUTOSIZE);
  VideoCapture cap;
  Mat frame;
  cap.open(0);

  //视频流写出
  Size size = Size(cap.get(CV_CAP_PROP_FRAME_WIDTH), cap.get(CV_CAP_PROP_FRAME_HEIGHT));
  VideoWriter writer;
  writer.open(&quot;test.avi&quot;, -1, 10, size);
  //

  for (;;){
      cap &gt;&gt; frame;
      imshow(&quot;out&quot;, frame);
      writer &lt;&lt; frame;
      if (waitKey(33) &gt;= 0) break;
  }
  cap.release();
  //waitKey(0);
  return 0;
}</code></pre>
</li>
</ul>
<p>版权声明：原创,转载请注明来源,否则律师函警告</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/07/10/opencv3(2)%20%E5%9B%BE%E5%83%8F%E8%BD%BD%E5%85%A5-%E6%98%BE%E7%A4%BA-%E8%BE%93%E5%87%BA/" data-id="ck4mhjkd0002lw6zwaqfebzqr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opencv3/" rel="tag">opencv3</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-opencv3(1-1) vs2015配置opencv3开发环境" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/10/opencv3(1-1)%20vs2015%E9%85%8D%E7%BD%AEopencv3%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" class="article-date">
  <time datetime="2019-07-10T06:02:45.000Z" itemprop="datePublished">2019-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/opencv3/">opencv3</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/10/opencv3(1-1)%20vs2015%E9%85%8D%E7%BD%AEopencv3%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">opencv3(1-1) vs2015配置opencv3开发环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="vs2015配置opencv3开发环境"><a href="#vs2015配置opencv3开发环境" class="headerlink" title="vs2015配置opencv3开发环境"></a>vs2015配置opencv3开发环境</h2><p>官网地址:<a href="https://opencv.org/" target="_blank" rel="noopener">https://opencv.org/</a></p>
<ul>
<li><p>下载<br><img src="/images/opencv3/1.jpg" alt="&quot;opencv&quot;"><br><img src="/images/opencv3/2.jpg" alt="&quot;opencv&quot;"></p>
</li>
<li><p>下载完成后双击安装,并配置环境变量<br><img src="/images/opencv3/3.jpg" alt="&quot;opencv&quot;"></p>
</li>
<li><p>打开VS2015,新建项目<br><img src="/images/opencv3/4.jpg" alt="&quot;opencv&quot;"><br><img src="/images/opencv3/5.jpg" alt="&quot;opencv&quot;"></p>
</li>
</ul>
<p><strong>配置opencv</strong><br><img src="/images/opencv3/6.jpg" alt="&quot;opencv&quot;"></p>
<ul>
<li>添加包含目录<br><img src="/images/opencv3/7.jpg" alt="&quot;opencv&quot;"><br><img src="/images/opencv3/8.jpg" alt="&quot;opencv&quot;"></li>
<li>添加库目录<br><img src="/images/opencv3/9.jpg" alt="&quot;opencv&quot;"><br><img src="/images/opencv3/10.jpg" alt="&quot;opencv&quot;"></li>
<li>添加附加依赖项 将vc14下的lib都添加进来,以d结尾的lib文件为调试使用<br><img src="/images/opencv3/11.jpg" alt="&quot;opencv&quot;"><br><img src="/images/opencv3/12.jpg" alt="&quot;opencv&quot;"></li>
<li>测试<br><img src="/images/opencv3/13.jpg" alt="&quot;opencv&quot;"><br><img src="/images/opencv3/14.jpg" alt="&quot;opencv&quot;"><pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
using namespace cv;
int main() {
  Mat img = imread(&quot;D:/learn/dota.jpg&quot;);
  imshow(&quot;dota&quot;, img); 
  waitKey(6000);
}</code></pre>
</li>
<li>运行<br><img src="/images/opencv3/15.jpg" alt="&quot;opencv&quot;"></li>
<li>结果<br><img src="/images/opencv3/16.jpg" alt="&quot;opencv&quot;"></li>
</ul>
<hr>
<p><strong>opencv模块简介</strong><br><img src="/images/opencv3/17.jpg" alt="&quot;opencv&quot;"></p>
<ul>
<li>calib3d<br>相机校准和3维重建相关的内容,包括多视角几何算法、单个立体摄像头标定、物体姿态估计、立体相似性算法等</li>
<li>core<br>核心功能模块,包含opencv基本数据结构、动态数据结构、绘图函数、数组操作、辅助函数/系统函数/宏、OpenGL互操作</li>
<li>imgproc<br>图像处理模块,包含线性和非线性的图像滤波、图像几何变换、直方图、结构分和形状描述、运动分析、运动分析和对象跟踪、特征检测、目标检测</li>
<li>features2d<br>2D功能模块,包含特征检测和描述、特征检测器通用接口、描述符提取器、描述符匹配器、通用描述符匹配器接口、关键点绘制函数和匹配功能绘制函数</li>
<li>flann<br>高维近似近邻快速搜索算法库,包含快速近似最近邻搜索、聚类</li>
<li>gpu<br>运用GPU加速计算机视觉模块</li>
<li>highgui<br>高层GUI图形用户界面,包含媒体输入输出、视频捕捉、图像和视频编码解码、图形交互界面接口</li>
<li>legacy<br>废弃的代码库,用于向下兼容</li>
<li>ml<br>机器学习模块，包含统计模型、贝叶斯分类器、支持向量机、决策树、提升、随机树、神经网络</li>
<li>objdetect<br>目标检测模块,包含级联分类和LatentSVM</li>
<li>photo<br>图像修复和去噪</li>
<li>stitching<br>图像拼接模块,包含拼接流水线、特点寻找和匹配图像、估计旋转、自动校准、图片歪斜、接缝估测、曝光补偿、图片混合</li>
<li>superres<br>超分辨率技术模块</li>
<li>video<br>视频分析组件,包含运动估计、背景分离、对象跟踪</li>
<li>videostab<br>视频稳定组件</li>
</ul>
<p>版权声明：原创,转载请注明来源,否则律师函警告</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jiaopaner.github.io/2019/07/10/opencv3(1-1)%20vs2015%E9%85%8D%E7%BD%AEopencv3%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" data-id="ck4mhjkd5002zw6zwgoy5blnj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opencv3/" rel="tag">opencv3</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/opencv3/">opencv3</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">数字图像处理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E5%AD%A6/">数学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/">目标检测</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JNA/" rel="tag">JNA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/" rel="tag">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/" rel="tag">jdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/" rel="tag">leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/make/" rel="tag">make</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mxnet/" rel="tag">mxnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opencv/" rel="tag">opencv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opencv-samples/" rel="tag">opencv samples</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opencv3/" rel="tag">opencv3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E8%B4%B4%E5%A3%AB/" rel="tag">小贴士</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">数字图像处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/" rel="tag">模型转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/" rel="tag">神经网络模型</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 16px;">C++</a> <a href="/tags/JNA/" style="font-size: 10px;">JNA</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/jdk/" style="font-size: 10px;">jdk</a> <a href="/tags/leetcode/" style="font-size: 20px;">leetcode</a> <a href="/tags/make/" style="font-size: 10px;">make</a> <a href="/tags/mxnet/" style="font-size: 10px;">mxnet</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/opencv/" style="font-size: 10px;">opencv</a> <a href="/tags/opencv-samples/" style="font-size: 10px;">opencv samples</a> <a href="/tags/opencv3/" style="font-size: 16px;">opencv3</a> <a href="/tags/%E5%B0%8F%E8%B4%B4%E5%A3%AB/" style="font-size: 10px;">小贴士</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 14px;">操作系统</a> <a href="/tags/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 12px;">数字图像处理</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 12px;">数学</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 18px;">数据结构</a> <a href="/tags/%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size: 10px;">模型转换</a> <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">深度学习</a> <a href="/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/" style="font-size: 12px;">神经网络模型</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/12/18/elasticsearch%20%E6%95%99%E7%A8%8B/">elasticsearch 教程</a>
          </li>
        
          <li>
            <a href="/2019/11/20/hadoop%20spark/">hadoop spark</a>
          </li>
        
          <li>
            <a href="/2019/11/01/android%E4%BD%BF%E7%94%A8opencv%20native%E6%96%B9%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">android使用opencv native方式环境搭建</a>
          </li>
        
          <li>
            <a href="/2019/10/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E8%BD%AC%E6%8D%A2/">深度学习模型转换</a>
          </li>
        
          <li>
            <a href="/2019/09/19/mxnet%20Windows%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85CPU%E7%89%88/">mxnet Windows编译安装CPU版 c++ api</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 JiaoPan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>